# Real vanilla example from CK3
# Story cycle that tracks destiny children and grants periodic benefits

destiny_child = {
	on_setup = {
		set_variable = {
			name = destiny_story_setup_complete
			value = yes
		}
	}
	
	on_end = {
		if = {
			limit = {
				exists = scope:story.story_owner
			}
			scope:story.story_owner = {
				trigger_event = destiny_child.0002
			}
		}
	}
	
	on_owner_death = {
		scope:story = {
			end_story = yes
		}
	}
	
	effect_group = {
		months = { 60 120 }
		
		triggered_effect = {
			trigger = {
				NOT = { has_character_flag = destiny_childhood_gift_received }
			}
			effect = {
				trigger_event = destiny_child.0001
			}
		}
	}
	
	effect_group = {
		years = 1
		
		triggered_effect = {
			trigger = {
				any_parent = {
					has_trait = ambitious
				}
			}
			effect = {
				add_character_modifier = {
					modifier = destiny_ambition_modifier
					years = 5
				}
			}
		}
		
		triggered_effect = {
			trigger = {
				age >= 10
				age < 16
			}
			effect = {
				add_prestige = 50
			}
		}
	}
}
